---
interface Props {
	company: string;
	role?: string;
	date: string;
	description: string;
	points: string[];
	colorClass?: string;
	icon?: string;
	isCurrent?: boolean;
}

const {
	company,
	role = "Frontend Developer",
	date,
	description,
	points,
	colorClass = "bg-primary", // Default to primary yellow
	icon = "laptop_mac",
	isCurrent = false,
} = Astro.props;

// Map simple color names to tailwind classes if needed, or pass full classes.
// For simplicity, we assume colorClass is a bg- class like 'bg-primary' or 'bg-blue-600'
// And we need the specific text color for the title.
// Let's derive a text class from it or just pass it text-primary as default.

const titleColorClass =
	colorClass === "bg-primary" ? "text-primary" : "text-blue-600"; // Simple toggle for now based on the two items
---

<div
	class={`bg-card-light dark:bg-card-dark p-6 sm:p-8 rounded-2xl shadow-lg border relative transition-colors group ${isCurrent ? "border-primary dark:border-primary/60 ring-1 ring-primary/10" : "border-gray-200 dark:border-gray-800 hover:border-primary/50"}`}
>
	<div
		class={`absolute top-6 left-0 w-1 h-12 ${colorClass} rounded-r-md group-hover:h-24 transition-all duration-300`}
	>
	</div>
	{
		isCurrent && (
			<div class='absolute -top-3 right-6 bg-primary text-black text-xs font-bold px-3 py-1 rounded-full shadow-md uppercase tracking-wider'>
				Current
			</div>
		)
	}
	<div class='pl-4'>
		<div class='flex justify-between items-start mb-4'>
			<div>
				<h3 class={`text-2xl font-bold ${titleColorClass}`}>
					{company}
				</h3>
				<p
					class='text-xs font-bold tracking-wider text-primary uppercase bg-primary/10 px-3 py-1 rounded-full inline-block mt-2 mb-1 border border-primary/20 transition-all group-hover:bg-primary group-hover:text-black'
				>
					{date}
				</p>
				{
					role && (
						<p class='text-xs text-gray-400 dark:text-gray-500 font-mono mt-0.5'>
							{role}
						</p>
					)
				}
			</div>
			<span
				class='material-icons-outlined text-gray-600 dark:text-gray-500'
				>{icon}</span
			>
		</div>
		<p
			class='text-sm text-gray-600 dark:text-gray-400 mb-4'
			set:html={description}
		/>
		<ul
			class='space-y-2 text-sm text-gray-700 dark:text-gray-300 list-disc list-inside marker:text-primary'
		>
			{points.map((point) => <li set:html={point} />)}
		</ul>
	</div>
</div>
