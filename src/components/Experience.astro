---
import ExperienceItem from "./ExperienceItem.astro";
import { getI18N } from "../i18n";
import { getLangFromUrl } from "../i18n/utils";

const currentLocale = getLangFromUrl(Astro.url);
const i18n = getI18N({ currentLocale });

const experiences = [
	{
		company: "Vueling Airlines",
		role: "Frontend Developer",
		date: `Nov 2024 - ${i18n.EXPERIENCE_PRESENT}`,
		description: i18n.EXPERIENCE_DESCRIPTION_VUELING,
		isCurrent: true,
		points:
			currentLocale === "ca"
				? [
						"Desenvolupament d'aplicacions Angular d'alt rendiment.",
						"Implementació d'estàndards de qualitat enterprise.",
						"Optimització de fluxos de dades complexos.",
						"Col·laboració en equips d'alt rendiment.",
					]
				: currentLocale === "es"
					? [
							"Desarrollo de aplicaciones Angular de alto rendimiento.",
							"Implementación de estándares de calidad enterprise.",
							"Optimización de flujos de datos complejos.",
							"Colaboración en equipos de alto rendimiento.",
						]
					: [
							"<strong>High-Impact Development:</strong> Developing scalable, <strong>high-traffic Angular applications</strong> ensuring stability for thousands of daily users.",
							"<strong>Enterprise Standards:</strong> Implementing rigorous code quality practices and best practices in a complex enterprise environment.",
							"<strong>Agile Collaboration:</strong> Working within cross-functional teams (Desktop, Mobile, UX) under strict <strong>Agile/Scrum</strong> methodologies to deliver robust solutions.",
						],
		colorClass: "bg-yellow-500",
		titleColor: "text-yellow-500",
		icon: "flight_takeoff",
	},
	{
		company: "Brothapps",
		role: "Full-Cycle Frontend Developer",
		date: `Oct 2021 - Oct 2024`,
		description: i18n.EXPERIENCE_DESCRIPTION_BROTHAPPS,
		points:
			currentLocale === "ca"
				? [
						"Participació en la creació de web apps escalables amb Next.js.",
						"Disseny i desenvolupament d'interfícies d'administració avançades.",
						"Arquitectura full-stack integrant Firebase i Stripe.",
						"Refactorització estratègica per a l'optimització del rendiment.",
						"Lideratge tècnic en projectes amb metodologia Agile.",
					]
				: currentLocale === "es"
					? [
							"Participación en la creación de web apps escalables con Next.js.",
							"Diseño y desarrollo de interfaces de administración avanzadas.",
							"Arquitectura full-stack integrando Firebase y Stripe.",
							"Refactorización estratégica para la optimización del rendimiento.",
							"Liderazgo técnico en proyectos con metodología Agile.",
						]
					: [
							"<strong>Core Development:</strong> Built and maintained scalable web apps using <strong>Next.js</strong> and <strong>Astro</strong>, ensuring high performance and SEO optimization.",
							"<strong>Integrations:</strong> Implemented critical third-party services including <strong>Stripe</strong> for payments and <strong>Firebase/Firestore</strong> for real-time data.",
							"<strong>Code Quality:</strong> Refactored legacy codebases to improve maintainability and performance (Clean Code & BEM methodology).",
							"<strong>Admin Tools:</strong> Developed custom dashboard interfaces for internal product management.",
						],
		colorClass: "bg-blue-600",
		titleColor: "text-blue-600",
		icon: "laptop_mac",
	},
];
---

<section
	id='experience'
	class='grid grid-cols-1 lg:grid-cols-2 gap-6'
>
	<h2
		class='col-span-1 lg:col-span-2 text-3xl font-bold text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-800 pb-4 mb-2 flex items-center'
	>
		{i18n.EXPERIENCE_TITLE}
		<span class='ml-2 w-2 h-2 bg-primary rounded-full'></span>
	</h2>

	{experiences.map((exp) => <ExperienceItem {...exp} />)}
</section>
