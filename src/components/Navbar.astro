---
import { getI18N } from "../i18n";
import { getLangFromUrl } from "../i18n/utils";
import LanguageMenu from "./LanguageMenu.astro";

const currentLocale = getLangFromUrl(Astro.url);
const i18n = getI18N({ currentLocale });

const links = [
	{ text: i18n.NAVBAR_LINK1, href: "#experience" },
	{ text: i18n.NAVBAR_LINK2, href: "#projects" },
	{ text: i18n.NAVBAR_LINK3, href: "#about" },
];
---

<nav
	class='sticky top-0 z-50 backdrop-blur-md bg-white/70 dark:bg-background-dark/80 border-b border-gray-200 dark:border-gray-800 transition-colors duration-300'
>
	<div class='max-w-7xl mx-auto px-4 sm:px-6 lg:px-8'>
		<div class='flex items-center justify-between h-16'>
			<div class='flex-shrink-0'>
				<a
					href='#'
					class='text-xl font-bold text-gray-900 dark:text-white tracking-tight'
				>
					Guifr√©<span class='text-primary'>.dev</span>
				</a>
			</div>
			<div class='hidden md:block'>
				<div class='ml-10 flex items-baseline space-x-8'>
					{
						links.map((link) => (
							<a
								href={link.href}
								class='hover:text-primary dark:hover:text-primary px-3 py-2 rounded-md text-sm font-medium transition-colors text-gray-700 dark:text-gray-300'
							>
								{link.text}
							</a>
						))
					}
				</div>
			</div>
			<div class='flex items-center space-x-4'>
				<LanguageMenu />
				<button
					id='theme-toggle'
					class='p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-800 transition-colors'
					aria-label='Toggle Dark Mode'
				>
					<span
						class='material-icons-outlined text-gray-600 dark:text-gray-300'
						>dark_mode</span
					>
				</button>
			</div>
		</div>
	</div>
</nav>

<script is:inline>
	const themeToggleBtn = document.getElementById("theme-toggle");

	// Toggle theme function
	const toggleTheme = () => {
		if (document.documentElement.classList.contains("dark")) {
			document.documentElement.classList.remove("dark");
			localStorage.theme = "light";
		} else {
			document.documentElement.classList.add("dark");
			localStorage.theme = "dark";
		}
	};

	if (themeToggleBtn) {
		themeToggleBtn.addEventListener("click", toggleTheme);
	}
</script>
